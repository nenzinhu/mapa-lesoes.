<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lesões Corporais</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f2f5;
      padding: 20px;
      text-align: center;
    }

    .card {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      max-width: 400px;
      margin-inline: auto;
    }

    #imagem-container {
      position: relative;
      width: 100%;
      max-width: 300px;
      margin: auto;
    }

    #imagem-container img {
      width: 100%;
      display: block;
    }

    .membro {
      position: absolute;
      cursor: pointer;
    }

    .membro:hover::after {
      content: attr(data-nome);
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      color: white;
      font-size: 12px;
      padding: 4px 6px;
      border-radius: 4px;
      white-space: nowrap;
      z-index: 10;
    }

    .marcador {
      position: absolute;
      width: 16px;
      height: 16px;
      background: red;
      border-radius: 50%;
      border: 2px solid white;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 6px rgba(0,0,0,0.4);
      pointer-events: none;
      animation: pulsar 1s infinite ease-out;
    }

    @keyframes pulsar {
      0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.6; }
    }

    button, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 14px;
    }

    #trocar {
      background: #007bff;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="card">
  <h3>Local da Lesão</h3>

  <div id="imagem-container">
    <img id="imagem-corpo" src="frente.png" alt="Corpo humano - frente" />

    <!-- Zonas da FRENTE -->
    <div class="membro frente" data-nome="Cabeça" style="top:5%; left:45%; width:30px; height:30px;"></div>
    <div class="membro frente" data-nome="Pescoço" style="top:12%; left:46%; width:25px; height:20px;"></div>
    <div class="membro frente" data-nome="Peito" style="top:18%; left:42%; width:50px; height:40px;"></div>
    <div class="membro frente" data-nome="Abdômen" style="top:27%; left:42%; width:50px; height:45px;"></div>
    <div class="membro frente" data-nome="Pelvis" style="top:35%; left:44%; width:40px; height:40px;"></div>
    <div class="membro frente" data-nome="Coxa Esquerda" style="top:43%; left:39%; width:30px; height:80px;"></div>
    <div class="membro frente" data-nome="Coxa Direita" style="top:43%; left:58%; width:30px; height:80px;"></div>
    <div class="membro frente" data-nome="Joelho Esquerdo" style="top:60%; left:40%; width:30px; height:20px;"></div>
    <div class="membro frente" data-nome="Joelho Direito" style="top:60%; left:58%; width:30px; height:20px;"></div>
    <div class="membro frente" data-nome="Perna Inferior Esquerda" style="top:65%; left:40%; width:30px; height:60px;"></div>
    <div class="membro frente" data-nome="Perna Inferior Direita" style="top:65%; left:58%; width:30px; height:60px;"></div>
    <div class="membro frente" data-nome="Pé Esquerdo" style="top:87%; left:42%; width:25px; height:20px;"></div>
    <div class="membro frente" data-nome="Pé Direito" style="top:87%; left:60%; width:25px; height:20px;"></div>
    <div class="membro frente" data-nome="Ombro Esquerdo" style="top:18%; left:20%; width:30px; height:30px;"></div>
    <div class="membro frente" data-nome="Ombro Direito" style="top:18%; left:75%; width:30px; height:30px;"></div>
    <div class="membro frente" data-nome="Antebraço Esquerdo" style="top:30%; left:20%; width:25px; height:50px;"></div>
    <div class="membro frente" data-nome="Antebraço Direito" style="top:30%; left:75%; width:25px; height:50px;"></div>
    <div class="membro frente" data-nome="Mão Esquerda" style="top:42%; left:21%; width:25px; height:25px;"></div>
    <div class="membro frente" data-nome="Mão Direita" style="top:42%; left:75%; width:25px; height:25px;"></div>

    <!-- Zonas das COSTAS (mesmas posições, nomes diferentes) -->
    <div class="membro costas" data-nome="Cabeça Costas" style="top:5%; left:45%; width:30px; height:30px;"></div>
    <div class="membro costas" data-nome="Nuca" style="top:12%; left:46%; width:25px; height:20px;"></div>
    <div class="membro costas" data-nome="Ombro Esquerdo Costas" style="top:18%; left:20%; width:30px; height:30px;"></div>
    <div class="membro costas" data-nome="Ombro Direito Costas" style="top:18%; left:75%; width:30px; height:30px;"></div>
    <div class="membro costas" data-nome="Costas Superiores" style="top:18%; left:42%; width:50px; height:40px;"></div>
    <div class="membro costas" data-nome="Costas Inferiores" style="top:27%; left:42%; width:50px; height:45px;"></div>
    <div class="membro costas" data-nome="Glúteo Esquerdo" style="top:35%; left:40%; width:30px; height:40px;"></div>
    <div class="membro costas" data-nome="Glúteo Direito" style="top:35%; left:58%; width:30px; height:40px;"></div>
    <div class="membro costas" data-nome="Coxa Esquerda Costas" style="top:43%; left:39%; width:30px; height:80px;"></div>
    <div class="membro costas" data-nome="Coxa Direita Costas" style="top:43%; left:58%; width:30px; height:80px;"></div>
    <div class="membro costas" data-nome="Perna Inferior Esquerda Costas" style="top:65%; left:40%; width:30px; height:60px;"></div>
    <div class="membro costas" data-nome="Perna Inferior Direita Costas" style="top:65%; left:58%; width:30px; height:60px;"></div>
    <div class="membro costas" data-nome="Pé Esquerdo Costas" style="top:87%; left:42%; width:25px; height:20px;"></div>
    <div class="membro costas" data-nome="Pé Direito Costas" style="top:87%; left:60%; width:25px; height:20px;"></div>
    <div class="membro costas" data-nome="Antebraço Esquerdo Costas" style="top:30%; left:20%; width:25px; height:50px;"></div>
    <div class="membro costas" data-nome="Antebraço Direito Costas" style="top:30%; left:75%; width:25px; height:50px;"></div>
    <div class="membro costas" data-nome="Mão Esquerda Costas" style="top:42%; left:21%; width:25px; height:25px;"></div>
    <div class="membro costas" data-nome="Mão Direita Costas" style="top:42%; left:75%; width:25px; height:25px;"></div>
  </div>

  <button id="trocar">Mostrar Costas</button>

  <select id="tipo-lesao">
    <option value="">Selecione o tipo de lesão</option>
    <option value="Escoriação">Escoriação</option>
    <option value="Corte/Laceração">Corte / Laceração</option>
    <option value="Contusão">Contusão</option>
    <option value="Fratura Suspeita">Fratura (suspeita)</option>
    <option value="Dor Local">Dor local</option>
  </select>
</div>

<div class="card">
  <h3>Relato automático</h3>
  <textarea id="texto-relato" rows="6" readonly></textarea>
  <button onclick="copiar()">Copiar relato</button>
</div>

<script>
let ladoAtual = "frente";
const imagem = document.getElementById('imagem-corpo');
const tipo = document.getElementById('tipo-lesao');
const texto = document.getElementById('texto-relato');
const trocar = document.getElementById('trocar');
const lesoes = [];
let membroAtual = null;
let marcadorAtual = null;

trocar.addEventListener('click', () => {
  ladoAtual = ladoAtual === "frente" ? "costas" : "frente";
  imagem.src = ladoAtual === "frente" ? "frente.png" : "tras.png";
  trocar.innerText = ladoAtual === "frente" ? "Mostrar Costas" : "Mostrar Frente";
  document.querySelectorAll('.membro.frente').forEach(el => el.style.display = ladoAtual === "frente" ? "block" : "none");
  document.querySelectorAll('.membro.costas').forEach(el => el.style.display = ladoAtual === "costas" ? "block" : "none");
});
trocar.click(); // ativa lado frente no início

document.querySelectorAll('.membro').forEach(el => {
  el.addEventListener('click', (e) => {
    e.stopPropagation();
    membroAtual = el.dataset.nome;
    const container = document.getElementById('imagem-container');
    const rect = container.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const marcador = document.createElement('div');
    marcador.className = 'marcador';
    marcador.style.left = x + 'px';
    marcador.style.top = y + 'px';
    container.appendChild(marcador);
    marcadorAtual = marcador;
    tipo.value = '';
  });
});

tipo.addEventListener('change', () => {
  if (!membroAtual || !tipo.value || !marcadorAtual) return;
  lesoes.push({ local: membroAtual, tipo: tipo.value });
  gerarTexto();
  marcadorAtual = null;
  tipo.value = '';
});

function gerarTexto() {
  const frases = lesoes.map(({ local, tipo }) => {
    const parte = `na região de ${local.toLowerCase()}`;
    switch (tipo) {
      case 'Escoriação': return `apresentava escoriações aparentes ${parte}.`;
      case 'Corte/Laceração': return `apresentava corte visível ${parte}.`;
      case 'Contusão': return `apresentava contusão ${parte}.`;
      case 'Fratura Suspeita': return `relatava dores intensas ${parte}, sugerindo fratura.`;
      case 'Dor Local': return `relatava dor localizada ${parte}.`;
    }
  });
  texto.value = frases.length
    ? `Durante atendimento no local, foi possível observar que a vítima ${frases.join(' ')}`
    : '';
}

function copiar() {
  texto.select();
  document.execCommand('copy');
  alert("Texto copiado!");
}
</script>

</body>
</html>
